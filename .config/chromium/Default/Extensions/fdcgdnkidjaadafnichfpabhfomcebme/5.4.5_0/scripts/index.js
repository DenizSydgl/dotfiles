!function e(n,o,t){function r(a,s){if(!o[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=o[a]={exports:{}};n[a][0].call(c.exports,function(e){var o=n[a][1][e];return r(o?o:e)},c,c.exports,e,n,o,t)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)r(t[a]);return r}({1:[function(e,n,o){!function(o,t){"object"==typeof n&&n.exports&&"function"==typeof e?n.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):o.log=t()}(this,function(){function e(e){return typeof console===u?!1:void 0!==console[e]?n(console,e):void 0!==console.log?n(console,"log"):s}function n(e,n){var o=e[n];if("function"==typeof o.bind)return o.bind(e);try{return Function.prototype.bind.call(o,e)}catch(t){return function(){return Function.prototype.apply.apply(o,[e,arguments])}}}function o(e,n){return function(){typeof console!==u&&(t(n),a[e].apply(a,arguments))}}function t(e){for(var n=0;n<l.length;n++){var o=l[n];a[o]=e>n?s:a.methodFactory(o,e)}}function r(e){var n=(l[e]||"silent").toUpperCase();try{return void(window.localStorage.loglevel=n)}catch(o){}try{window.document.cookie="loglevel="+n+";"}catch(o){}}function i(){var e;try{e=window.localStorage.loglevel}catch(n){}if(typeof e===u)try{e=/loglevel=([^;]+)/.exec(window.document.cookie)[1]}catch(n){}void 0===a.levels[e]&&(e="WARN"),a.setLevel(a.levels[e])}var a={},s=function(){},u="undefined",l=["trace","debug","info","warn","error"];a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=function(n,t){return e(n)||o(n,t)},a.setLevel=function(e,n){if("string"==typeof e&&void 0!==a.levels[e.toUpperCase()]&&(e=a.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;return n!==!1&&r(e),t(e),typeof console===u&&e<a.levels.SILENT?"No console available for logging":void 0},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var c=typeof window!==u?window.log:void 0;return a.noConflict=function(){return typeof window!==u&&window.log===a&&(window.log=c),a},i(),a})},{}],2:[function(e,n,o){!function(e,t){"use strict";var r="0.7.9",i="",a="?",s="function",u="undefined",l="object",c="string",d="major",f="model",p="name",g="type",m="vendor",w="version",v="architecture",h="console",y="mobile",b="tablet",_="smarttv",x="wearable",E="embedded",L={extend:function(e,n){for(var o in n)-1!=="browser cpu device engine os".indexOf(o)&&n[o].length%2===0&&(e[o]=n[o].concat(e[o]));return e},has:function(e,n){return"string"==typeof e?-1!==n.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===c?e.split(".")[0]:t}},P={rgx:function(){for(var e,n,o,r,i,a,c,d=0,f=arguments;d<f.length&&!a;){var p=f[d],g=f[d+1];if(typeof e===u){e={};for(r in g)i=g[r],typeof i===l?e[i[0]]=t:e[i]=t}for(n=o=0;n<p.length&&!a;)if(a=p[n++].exec(this.getUA()))for(r=0;r<g.length;r++)c=a[++o],i=g[r],typeof i===l&&i.length>0?2==i.length?typeof i[1]==s?e[i[0]]=i[1].call(this,c):e[i[0]]=i[1]:3==i.length?typeof i[1]!==s||i[1].exec&&i[1].test?e[i[0]]=c?c.replace(i[1],i[2]):t:e[i[0]]=c?i[1].call(this,c,i[2]):t:4==i.length&&(e[i[0]]=c?i[3].call(this,c.replace(i[1],i[2])):t):e[i]=c?c:t;d+=2}return e},str:function(e,n){for(var o in n)if(typeof n[o]===l&&n[o].length>0){for(var r=0;r<n[o].length;r++)if(L.has(n[o][r],e))return o===a?t:o}else if(L.has(n[o],e))return o===a?t:o;return e}},k={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},A={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,w],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],w],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[p,w],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],w],[/(edge)\/((\d+)?[\w\.]+)/i],[p,w],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],w],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],w],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[p,w],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],w],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],w],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[w,[p,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[w,[p,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[w,[p,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[w,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[w,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[w,P.str,k.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,w],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],w],[/fxios\/([\w\.-]+)/i],[w,[p,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,L.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",L.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,L.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,m,[g,b]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[m,"Apple"],[g,b]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[m,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[m,f,[g,b]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[m,"Amazon"],[g,b]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,P.str,k.device.amazon.model],[m,"Amazon"],[g,y]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,m,[g,y]],[/\((ip[honed|\s\w*]+);/i],[f,[m,"Apple"],[g,y]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[m,f,[g,y]],[/\(bb10;\s(\w+)/i],[f,[m,"BlackBerry"],[g,y]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[f,[m,"Asus"],[g,b]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[m,"Sony"],[f,"Xperia Tablet"],[g,b]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[m,"Sony"],[f,"Xperia Phone"],[g,y]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[m,f,[g,h]],[/android.+;\s(shield)\sbuild/i],[f,[m,"Nvidia"],[g,h]],[/(playstation\s[3portablevi]+)/i],[f,[m,"Sony"],[g,h]],[/(sprint\s(\w+))/i],[[m,P.str,k.device.sprint.vendor],[f,P.str,k.device.sprint.model],[g,y]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[m,f,[g,b]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[m,[f,/_/g," "],[g,y]],[/(nexus\s9)/i],[f,[m,"HTC"],[g,b]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[m,"Microsoft"],[g,h]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[m,"Microsoft"],[g,y]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[f,[m,"Motorola"],[g,y]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[m,"Motorola"],[g,b]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[m,"Samsung"],f,[g,b]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[m,"Samsung"],f,[g,y]],[/(samsung);smarttv/i],[m,f,[g,_]],[/\(dtv[\);].+(aquos)/i],[f,[m,"Sharp"],[g,_]],[/sie-(\w+)*/i],[f,[m,"Siemens"],[g,y]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[m,"Nokia"],f,[g,y]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[m,"Acer"],[g,b]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[m,"LG"],f,[g,b]],[/(lg) netcast\.tv/i],[m,f,[g,_]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[f,[m,"LG"],[g,y]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[m,"Lenovo"],[g,b]],[/linux;.+((jolla));/i],[m,f,[g,y]],[/((pebble))app\/[\d\.]+\s/i],[m,f,[g,x]],[/android.+;\s(glass)\s\d/i],[f,[m,"Google"],[g,x]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[f,/_/g," "],[m,"Xiaomi"],[g,y]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[g,L.lowerize],m,f]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[w,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,w],[/rv\:([\w\.]+).*(gecko)/i],[w,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,w],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[w,P.str,k.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[w,P.str,k.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],w],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,w],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],w],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],w],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,w],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],w],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],w],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,w],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[w,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[w,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,w]]},B=function(n,o){if(!(this instanceof B))return new B(n,o).getResult();var t=n||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:i),r=o?L.extend(A,o):A;return this.getBrowser=function(){var e=P.rgx.apply(this,r.browser);return e.major=L.major(e.version),e},this.getCPU=function(){return P.rgx.apply(this,r.cpu)},this.getDevice=function(){return P.rgx.apply(this,r.device)},this.getEngine=function(){return P.rgx.apply(this,r.engine)},this.getOS=function(){return P.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return t},this.setUA=function(e){return t=e,this},this.setUA(t),this};B.VERSION=r,B.BROWSER={NAME:p,MAJOR:d,VERSION:w},B.CPU={ARCHITECTURE:v},B.DEVICE={MODEL:f,VENDOR:m,TYPE:g,CONSOLE:h,MOBILE:y,SMARTTV:_,TABLET:b,WEARABLE:x,EMBEDDED:E},B.ENGINE={NAME:p,VERSION:w},B.OS={NAME:p,VERSION:w},typeof o!==u?(typeof n!==u&&n.exports&&(o=n.exports=B),o.UAParser=B):typeof define===s&&define.amd?define(function(){return B}):e.UAParser=B;var T=e.jQuery||e.Zepto;if(typeof T!==u){var I=new B;T.ua=I.getResult(),T.ua.get=function(){return I.getUA()},T.ua.set=function(e){I.setUA(e);var n=I.getResult();for(var o in n)T.ua[o]=n[o]}}}("object"==typeof window?window:this)},{}],3:[function(e,n,o){(function(n){var t,r,i,a,s,u,l,c,d,f,p,g,m,w,v,h,y,b,_,x,E;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,s=e("./config"),b=e("storage"),m=e("./registration"),y=m.signUp,v=m.signIn,h=m.signOut,_=e("./update"),f=e("./page").page,p=e("./popup").popup,r=e("./api_request"),i=e("auth"),w=e("xhr").request,a=e("browser"),d=e("./language").messages,c=e("./url").formatUrlParams,o.updatePassword=x=t.fromEvent(f,"request:updatePassword").flatMapLatest(function(e){var n;return n=e.password,r("account","PUT",{new_password:n.trim()})}),x.onValue(function(){return f.send("response:updatePassword")}),o.device=l=t.fromPromise(b.read("device")).skipErrors().merge(y.merge(v).merge(_).map(function(e){var n;return n=e.device})).filter(function(e){return e}).scan({},function(e,n){var o,t;for(o in n)t=n[o],e[o]=t;return e}).changes().merge(h.map(null)).toProperty(),l.onValue(function(e){return null!=e?(b.write("device",e),i.setCredentials(e.uuid,e.token)):b["delete"]("device")}),o.user=E=t.fromPromise(b.read("user")).skipErrors().merge(y.merge(v).merge(_).map(function(e){var n;return n=e.user})).filter(function(e){return e}).merge(h.map(null)).toProperty(),E.onValue(function(e){return null!=e?b.write("user",e):b["delete"]("user")}),g=E.slidingWindow(2,2).filter(function(e){var n,o;return o=e[0],n=e[1],null!=(null!=o?o.is_premium:void 0)&&null!=(null!=n?n.is_premium:void 0)}).filter(function(e){var n,o;return o=e[0],n=e[1],o.is_premium!==n.is_premium}).map(function(e){var n,o;return o=e[0],n=e[1],n.is_premium}),g.flatMap(function(e){return t.combineAsArray(l.take(1),d.take(1),e)}).map(function(e){var n,o,t,r,i;return n=e[0],t=e[1],o=e[2],r=t.notifications.status_change,o?[r.upgraded_title,r.upgraded_msg,null]:(i=c({url:"https://secure.zenmate.com#/upgrade",params:{utm_source:"extension",utm_content:"en",utm_medium:"{browser}",utm_campaign:"native-notification-premium2free",uuid:n.uuid,token:n.token}}),[r.downgraded_title,r.downgraded_msg,i])}).onValues(function(e,n,o){var t,r;return t={type:"basic",title:e,message:n},r={title:e,text:n,data:{url:o}},a.notify({chrome:{newsItem:t,data:{url:o}},firefox:r})}),t.fromEventTarget(f,"request:user").flatMapLatest(function(){return E.startWith(null)}).onValue(function(e){return f.send("response:user",e)}),u=t.fromEvent(f,"request:confirmAccount").merge(t.fromEventTarget(p,"request:confirmAccount")).flatMapLatest(function(){return l.take(1)}).flatMapLatest(function(e){return t.fromPromise(w({url:s.apiURL+"/v2/account/confirmations",method:"POST",responseType:"json",data:{auth_method:"device",auth_id:e.uuid,auth_secret:e.token}}))}),u.onValue(function(){return f.send("response:confirmAccount")}),u.onError(function(e){return f.send("error:confirmAccount",e.message)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./config":15,"./language":28,"./page":34,"./popup":36,"./registration":38,"./update":42,"./url":43,auth:6,browser:8,storage:11,xhr:14}],4:[function(e,n,o){(function(o){var t,r,i,a;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,i=e("xhr").request,a=e("storage"),r=e("./config"),n.exports=function(e,n,o){return null==n&&(n="GET"),null==o&&(o={}),t.fromPromise(a.read("device")).skipErrors().flatMapLatest(function(n){return o.auth_method="device",o.auth_id=n.uuid,o.auth_secret=n.token,t.fromPromise(i({url:r.apiURL+"/v2/"+e,responseType:"json",data:o}))})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":15,storage:11,xhr:14}],5:[function(e,n,o){(function(e){var n;n="undefined"!=typeof window?window.Bacon:"undefined"!=typeof e?e.Bacon:null,n.Property.prototype.triggeredBy=function(e,n){return this.changes().merge(this.sampledBy(e,n))}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,o){var t,r,i,a;r=e("loglevel"),a="no_data_in_plugin",i="no_data_in_plugin",t="",o.setCredentials=function(e,n){return a=e,i=n},o.setFeatureFlags=function(e){return t=e},o.authHandler=function(e,n){var o;return e.isProxy&&~e.realm.toLowerCase().indexOf("zenmate")?(o={authCredentials:{username:a+(t?";"+t:""),password:i}},n(o)):n()}},{loglevel:1}],7:[function(e,n,o){(function(n){var t,r,i,a,s=[].indexOf||function(e){for(var n=0,o=this.length;o>n;n++)if(n in this&&this[n]===e)return n;return-1};t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,i=e("loglevel"),a=t.fromBinder(function(e){return chrome.management.onEnabled.addListener(e),chrome.management.onDisabled.addListener(e),chrome.proxy.settings.onChange.addListener(e)}).flatMapLatest(function(){return r()}),r=function(){return t.fromCallback(function(e){return chrome.proxy.settings.get({incognito:!1},e)})},o.proxyBlocked=r().merge(a).map(function(e){return"controllable_by_this_extension"!==(null!=e?e.levelOfControl:void 0)&&"controlled_by_this_extension"!==(null!=e?e.levelOfControl:void 0)}).toProperty(!1),o.proxyBlockedBy=o.proxyBlocked.flatMapLatest(function(e){return t.fromCallback(function(n){return e?chrome.management.getAll(function(e){var o,t;return o=function(){var n,o,r,i;for(i=[],n=0,o=e.length;o>n;n++)t=e[n],chrome.runtime.id!==t.id&&t.enabled&&s.call(t.permissions,"proxy")>=0&&i.push({id:t.id,name:t.name,icon:null!=(r=t.icons)?r[0].url:void 0});return i}(),n(o)}):n([])})}).toProperty()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{loglevel:1}],8:[function(e,n,o){var t,r,i,a,s,u,l,c,d,f,p,g,m,w,v,h,y;y=e("../util"),i=e("../config"),d=e("../pacengine"),v=e("./storage"),r=e("./auth").authHandler,u=e("loglevel"),w=e("xhr").request,f=e("./page_api"),t=e("ua-parser-js"),h=new t(navigator.userAgent).getResult(),o.openPage=c=function(e){return chrome.tabs.create({url:e,active:!0},function(n){return chrome.windows.update(n.windowId,{focused:!0}),"page.html"===e.split("#")[0]?o.closePage(n.url.split("#")[0],n.id):void 0})},o.closePage=function(e,n){return chrome.tabs.query({url:e},function(e){var o,t,r,i;if(null!=e){for(r=[],o=0,t=e.length;t>o;o++)i=e[o],i.id!==n&&r.push(chrome.tabs.remove(i.id));return r}})},o.closePopup=function(){return!1},o.getExtensionURL=a=function(e){return chrome.extension.getURL(e)},o.setIconAction=function(e){return"popup"===e?chrome.browserAction.setPopup({popup:"popup.html"}):"page"===e?chrome.browserAction.setPopup({popup:""}):void 0},"undefined"!=typeof chrome&&null!==chrome&&null!=(g=chrome.browserAction)&&g.onClicked.addListener(function(){return c(a("page.html"))}),p=function(e){var n;try{return(n=localStorage.getItem(e))?JSON.parse(n):!1}catch(o){return!1}},l=function(){var e,n,o,t,r,a,s,u;if(e={},!(localStorage.length>0))return!1;for(r=Object.keys(localStorage),n=0,t=r.length;t>n;n++)o=r[n],(u=p(o))&&(e[o]=u);return(s=e["UserData-1"])&&(a=e["Session-1"])&&null!=(null!=s?s.email:void 0)&&null!=(null!=s?s.hash:void 0)&&(null!=a?a.loggedIn:0)?w({method:"POST",url:i.apiURL+"/v2/sign_in",responseType:"json",data:{auth_method:"legacy",auth_id:s.email,auth_secret:s.hash}}).then(function(e){var n,o,t,r,i;return i=e.user,o=e.device,t=e.locations,v.write("user",i),v.write("device",o),v.write("install_id",o.install_id),v.write("default_locations",t),(n=null!=a&&null!=(r=a.selectedServer)?r.country_code:void 0)&&v.write("default_location",n),null!=(null!=a?a.enabled:void 0)&&v.write("enabled",a.enabled),chrome.runtime.reload()}):!1},"undefined"!=typeof chrome&&null!==chrome&&null!=(m=chrome.runtime)&&m.onInstalled.addListener(function(e){return"update"===e.reason?w({method:"GET",url:i.apiURL+"/v2/et/upgrade",data:{previous_version:e.previousVersion}}):void 0}),o.setup=function(){return chrome.runtime.onUpdateAvailable.addListener(function(){return chrome.runtime.reload()}),chrome.runtime.setUninstallURL("https://zenmatefeedback.typeform.com/to/kgyZFr"),chrome.webRequest.onBeforeSendHeaders.addListener(function(e){return{cancel:!0}},{urls:["*://www.google.com/searchdomaincheck*"]},["blocking"]),chrome.proxy.onProxyError.addListener(function(e){return u.warn("Proxy error",e)}),Promise.all([v.read("install_id"),v.read("device")]).then(function(e){var n,o;return o=e[0],n=e[1],o&&n.uuid&&n.token?!0:l()})["catch"](function(){return l()})},o.hasIncognitoAccess=function(e){return chrome.extension.isAllowedIncognitoAccess(function(n){return e(n)})},o.connect=function(e,n,o,t){var a,s,u,l;return a=d.getNodeDictFromLocations(n,i.alternativeNodes),s=d.exportPAC(e.country_code,a,o,t),u={value:{mode:"pac_script",pacScript:{data:s}},scope:"regular"},chrome.proxy.settings.set(u,function(e){return void 0}),"undefined"!=typeof chrome&&null!==chrome&&null!=(l=chrome.webRequest)?l.onAuthRequired.addListener(r,{urls:["<all_urls>"]},["asyncBlocking"]):void 0},o.disconnect=function(){var e;return chrome.proxy.settings.set({value:{mode:"direct"},scope:"regular"},function(e){return void 0}),"undefined"!=typeof chrome&&null!==chrome&&null!=(e=chrome.webRequest)?e.onAuthRequired.removeListener(r):void 0},s={signedout:{38:a("icons/standard-38.png"),19:a("icons/standard-19.png")},enabled:{38:a("icons/enabled-38.png"),19:a("icons/enabled-19.png")},disabled:{38:a("icons/disabled-38.png"),19:a("icons/disabled-19.png")}},o.setIconImage=function(e,n){var o;return o={path:s[e.toLowerCase()]},null!=n&&(o.tabId=n),chrome.browserAction.setIcon(o)},o.setIconTitle=function(e,n){var o;return o={title:"ZenMate"},null!=e&&(o.title=o.title+"\n"+e),chrome.browserAction.setTitle(o)},o.setIconBadge=function(e,n,o){return null==o&&(o="#008ace"),chrome.browserAction.setBadgeBackgroundColor({color:o}),chrome.browserAction.setBadgeText({text:e||"",tabId:n})},o.onUnload=null,o.notify=function(e){var n,o;return o=e.chrome.newsItem,n=e.chrome.data,o.iconUrl=a("images/notification_chrome@2x.png"),o.eventTime=Date.now(),o.isClickable=null!=n.url,chrome.notifications.create(JSON.stringify(e),o,function(e){return void 0}),null!=n.url?chrome.notifications.onClicked.addListener(function(e){return c(n.url,!1)}):void 0},o.getInstallSource=function(e){var n,o,t;t=[{name:"website",pattern:"*://zenmate.com/*",host:"zenmate.com/"},{name:"chromestore",pattern:"*://chrome.google.com/webstore/detail/*/"+chrome.runtime.id+"*",host:"chrome.google.com/"},{name:"operastore",pattern:"*://addons.opera.com/*/extensions/details/zenmate-for-operatm/",host:"addons.opera.com/"}];try{return chrome.tabs.query({url:t.map(function(e){return e.pattern})},function(n){var o,r,i,a,s,u,l;for(o=0,i=n.length;i>o;o++)for(u=n[o],l=y.getUTMSourcesFromURL(u.url),r=0,a=t.length;a>r;r++)if(s=t[r],u.url.indexOf(s.host)>-1)return e("url="+s.name+";"+l);return e("unknown")})}catch(o){return n=o,u.error(n),e("unknown")}},o.fullReset=function(){},o.getLocale=function(){return navigator.language.toString().toLowerCase().split("-")[0]||"en"},o.getName=function(){return h.browser.name},o.getVersion=function(){return chrome.runtime.getManifest().version},o.unblockProxySettings=function(){return null}},{"../config":15,"../pacengine":33,"../util":44,"./auth":6,"./page_api":10,"./storage":11,loglevel:1,"ua-parser-js":2,xhr:14}],9:[function(e,n,o){var t,r,i,a=function(e,n){function o(){this.constructor=e}for(var t in n)s.call(n,t)&&(e[t]=n[t]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},s={}.hasOwnProperty;t=e("../emitter"),i=e("loglevel"),r=function(e){function n(e){this.name=e,n.__super__.constructor.call(this),this.port=null,chrome.runtime.onConnect.addListener(function(e){return function(n){var o,t,r,i,a;return n.name===e.name?((null!=(o=e.port)&&null!=(t=o.sender)&&null!=(r=t.tab)?r.id:void 0)&&e.port.sender.tab.id!==(null!=n&&null!=(i=n.sender)&&null!=(a=i.tab)?a.id:void 0)&&chrome.tabs.remove(e.port.sender.tab.id),e.port=n,e.port.onMessage.addListener(function(n){return e.trigger(n.subject,n.payload)}),e.port.onDisconnect.addListener(function(e){return void 0})):void 0}}(this))}return a(n,e),n.prototype.send=function(e,n){var o,t,r;try{return null!=(r=this.port)?r.postMessage({subject:e,payload:n}):void 0}catch(t){return void(o=t)}},n}(t),n.exports=r},{"../emitter":21,loglevel:1}],10:[function(e,n,o){var t,r,i,a=function(e,n){function o(){this.constructor=e}for(var t in n)s.call(n,t)&&(e[t]=n[t]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},s={}.hasOwnProperty;t=e("../emitter"),i=e("loglevel"),r=function(e){function n(){n.__super__.constructor.call(this),chrome.runtime.onMessage.addListener(function(e){return function(n,o){return null==n.payload&&(n.payload={}),n.payload._sender=o,e.trigger(n.subject,n.payload)}}(this))}return a(n,e),n.prototype.send=function(e,n,o){return chrome.tabs.sendMessage(n.tab.id,{subject:e,payload:o})},n}(t),n.exports=new r},{"../emitter":21,loglevel:1}],11:[function(e,n,o){o.read=function(e,n){return null==n&&(n=!0),new Promise(function(o,t){return chrome.storage.local.get(e,function(r){return null!=r[e]?o(r[e]):n?t(Error("Element "+e+" not found")):o()})})},o.write=function(e,n){return new Promise(function(o,t){var r;return r={},r[e]=n,chrome.storage.local.set(r,function(){return o()})})},o["delete"]=function(e){return new Promise(function(n,o){return chrome.storage.local.remove(e,n)})}},{}],12:[function(e,n,o){(function(n){var t,r,i,a;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,a=e("../util"),i=e("loglevel"),o.tabInfo=r=t.fromBinder(function(e){return chrome.tabs.query({active:!0},function(n){return(null!=n?n.length:void 0)?e(n[0]):void 0}),chrome.tabs.onActivated.addListener(function(n){return chrome.tabs.get(n.tabId,function(n){return e(n)})}),chrome.tabs.onUpdated.addListener(function(n,o,t){return"complete"!==o.status&&null!=t?e(t):void 0})}).diff(null,function(e,n){var o;return o=0===n.url.indexOf("chrome-devtools://devtools"),null!=n&&null!=e&&o?void 0:n}).filter(function(e){return e}).map(function(e){var n;return n=a.parseURL(e.url),e.host=n.host,e.favIconUrl=e.favIconUrl||"chrome://favicon/"+e.url,e}).toProperty()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":44,loglevel:1}],13:[function(e,n,o){var t,r,i,a=function(e,n){function o(){this.constructor=e}for(var t in n)s.call(n,t)&&(e[t]=n[t]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},s={}.hasOwnProperty;t=e("../emitter"),i=chrome.extension.getURL(""),r=function(e){function n(){n.__super__.constructor.call(this),this.active=!1,this.showMessage=!0,this.messages=null,chrome.runtime.onMessage.addListener(function(e){return function(n,o){return"getWidgetStatus"===n.subject&&chrome.tabs.sendMessage(o.tab.id,{subject:"widgetStatus",payload:{active:e.active,extUrl:i}}),"getWidgetMessage"===n.subject&&chrome.tabs.sendMessage(o.tab.id,{subject:"widgetMessage",payload:{show:e.showMessage,extUrl:i,messages:e.messages}}),("dismiss"===n.subject||"hideMessage"===n.subject)&&e.trigger(n.subject,o),"getPremium"===n.subject?e.trigger(n.subject,n.payload):void 0}}(this))}return a(n,e),n.prototype.toggle=function(e){return e!==this.active&&chrome.tabs.query({},function(n){var o,t,r,a;for(r=[],o=0,t=n.length;t>o;o++)a=n[o],r.push(chrome.tabs.sendMessage(a.id,{subject:"widgetStatus",payload:{active:e,extUrl:i}}));return r}),this.active=e},n.prototype.toggleMessage=function(e,n){return this.messages=n,this.showMessage=e,chrome.tabs.query({},function(o){var t,r,a,s;for(a=[],t=0,r=o.length;r>t;t++)s=o[t],a.push(chrome.tabs.sendMessage(s.id,{subject:"widgetMessage",payload:{show:e,extUrl:i,messages:n}}));return a})},n}(t),n.exports=new r},{"../emitter":21}],14:[function(e,n,o){var t,r,i;t=e("ua-parser-js"),i=e("storage"),r=function(){return Promise.all([i.read("install_id",!1),i.read("install_source",!1),i.read("enabled",!1),i.read("default_location",!1),i.read("user",!1),i.read("device",!1)]).then(function(e){var n,o,r,i,a,s,u,l;return i=e[0],a=e[1],r=e[2],n=e[3],l=e[4],o=e[5],u=new t(navigator.userAgent).getResult(),{real_location:null!=l?l.country_code:void 0,uuid:null!=o?o.uuid:void 0,platform_name:"extension",client_name:u.browser.name,user_agent_string:u.ua,client_env:u.ua,isPremium:null!=l?l.is_premium:void 0,isVerified:null!=l?l.is_verified:void 0,isAnonymous:null!=l?l.is_anonymous:void 0,zm_connected:r,selected_location:n,sku:null!=l&&null!=(s=l.subscription)?s.sku:void 0,install_source:a,install_id:i,os_name:u.os.name,os_ver:u.os.version,client_ver:chrome.runtime.getManifest().version,app_ver:chrome.runtime.getManifest().version,locations_scope:"full",show_premium:!0}})},o.request=function(e){return r().then(function(n){var o,t,r,i;t={};for(o in n)i=n[o],null!=i&&(t[o]=i);r=e.data;for(o in r)i=r[o],t[o]=i;return new Promise(function(n,o){var r,i,a,s,u,l,c,d;if(c=new XMLHttpRequest,u=e.method||"GET",r="","GET"===u.toUpperCase()&&e.data&&(i=function(){var e;e=[];for(s in t)d=t[s],e.push(encodeURIComponent(s)+"="+encodeURIComponent(d));return e}(),r="?"+i.join("&")),c.open(u,e.url+r),c.responseType=e.responseType||"",a=null,("POST"===(l=u.toUpperCase())||"PUT"===l)&&e.data){a=new FormData;for(s in t)d=t[s],a.append(s,d)}return c.onload=function(){var e;return c.status>=200&&c.status<400?n(c.response):(e=Error("Error"),e.type="onload",e.payload=c.response,e.status=c.status,o(e))},c.onerror=function(){var e;return e=Error("Network Error"),e.type="onerror",o(e)},c.ontimeout=function(){var e;return e=Error("Request timeout"),e.type="ontimeout",o(e)},c.send(a)})})}},{storage:11,"ua-parser-js":2}],15:[function(e,n,o){var t,r;r=e("loglevel"),t={logLevel:"silent",apiURL:"https://api.zenguard.biz",newsServiceUrl:"https://crm.zenguard.biz/crm/",localDomains:["zenguard.biz","local","dev","ip","box","lvh.me","ripe","invalid","intra","intranet","onion","vcap.me","zeus.pm","127.0.0.1.xip.io","smackaho.st","localtest.me","site","about:addons","about:newtab","about:preferences","about:config"],blackList:{"jid1-4P0kohSJxU1qGg@jetpack":"hola"},alternativeNodes:[{country_code:"US-ALT1",nodes:["us-alt1-1.zenguard.org","us-alt1-2.zenguard.org","us-alt1-3.zenguard.org","us-alt1-4.zenguard.org"]}],nodeOverrides:[{target_cc:"US",hosts:["hulu.com"],premium_only:!0,nodes:"US-ALT1"},{target_cc:"UW",hosts:["hulu.com"],premium_only:!0,nodes:"US-ALT1"}],ruleOverrides:[{domains:["facebook.com"],hosts:["facebook.net","fbcdn.com","fbcdn.net","fbstatic-a.akamaihd.net","fbcdn-dragon-a.akamaihd.net"]}]},t.setLogLevel=function(e){return null!=e?(t.logLevel=e,r.setLevel(t.logLevel),console.info("logLevel:",t.logLevel)):void 0},t.setApiURL=function(e){return null!=e?(t.apiURL=e,console.info("api:",t.apiURL)):void 0},t.setLogLevel("silent"),"undefined"!=typeof window&&null!==window&&(window.config=t),n.exports=t},{loglevel:1}],16:[function(e,n,o){(function(o){var t,r,i,a,s,u,l,c,d,f,p,g,m,w;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,r=e("browser"),c=e("./logged_in"),s=e("./enabled"),p=e("./rules"),g=p.rules,m=p.rulesEnabled,f=e("blocked").proxyBlocked,u=e("./locations"),a=e("./default_location"),l=e("loglevel"),d=e("./page_excludes"),n.exports=i=t.combineAsArray(c.and(f.not()).skipDuplicates(),s,a,u,g,m,d).onValues(function(e,n,o,t,i,a,s){var u;return e?(u=a&&i.length>0,null!=o.nodes&&w(o.nodes),u&&!n&&(o={country_code:"DEFAULT"}),u||(i=[]),n||u?r.connect(o,t,i,s):r.disconnect()):r.disconnect()}),w=function(e){var n,o,t;
for(n=e.length,t=null,o=null;0!==n;)o=Math.floor(Math.random()*n),n--,t=e[n],e[n]=e[o],e[o]=t;return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default_location":20,"./enabled":22,"./locations":29,"./logged_in":30,"./page_excludes":35,"./rules":39,blocked:7,browser:8,loglevel:1}],17:[function(e,n,o){(function(o){var t,r,i,a,s,u,l;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,i=e("./config"),r=e("browser"),l=e("./account").user,s=e("./language").language,u=e("xhr").request,a=function(e){return e?"premium":"free"},n.exports=t.once().merge(t.interval(18e5)).flatMapLatest(function(){return t.combineAsArray(l,s)}).debounceImmediate(2e3).flatMapLatest(function(e){var n,o,s;return s=e[0],n=e[1],t.fromPromise(u({url:""+i.newsServiceUrl,responseType:"json",data:{locale:n,country_code:null!=s?s.country_code:void 0,platform:null!=(o=r.getName())?o.toLowerCase():void 0,version:r.getVersion(),account_type:a(null!=s?s.is_premium:void 0)}})).map(function(e){return e?e:null})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./config":15,"./language":28,browser:8,xhr:14}],18:[function(e,n,o){(function(o){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,u=e("./tab_state").tabState,a=e("./locations"),i=e("./default_location"),s=e("./rules").rulesEnabled,n.exports=r=t.combineTemplate({tabState:u,rulesEnabled:s,defaultLocation:i,locations:a}).map(function(e){var n,o,t,r,i;return i=e.tabState,r=e.rulesEnabled,n=e.defaultLocation,t=e.locations,r&&i.isRuleActive?i.isDirect?{country_code:"OFF",location:"ZenMate Off"}:function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)o=t[e],o.country_code===i.customCountry&&r.push(o);return r}()[0]||n:n})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default_location":20,"./locations":29,"./rules":39,"./tab_state":41}],19:[function(e,n,o){(function(e){}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":15,"./popup":36,browser:8,loglevel:1,message_handler:9,storage:11}],20:[function(e,n,o){(function(o){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,s=e("storage"),a=e("./popup").popup,i=e("./locations"),u=e("./account").user,n.exports=r=t.fromPromise(s.read("default_location")).mapError(function(){return"not_a_cc"}).merge(t.fromEvent(a,"request:changeLocation")).skipDuplicates().combine(t.combineAsArray(i,u),function(e,n){var o,t,r,i,a,s,u,l,c;if(s=n[0],c=n[1],null==s)return null;for(o=0,r=s.length;r>o;o++)if(a=s[o],a.country_code===e&&(null!=(u=a.nodes)?u.length:void 0)&&(!a.premium_only||c.is_premium))return a;for(t=0,i=s.length;i>t;t++)if(a=s[t],(null!=(l=a.nodes)?l.length:void 0)&&(!a.premium_only||c.is_premium))return a}).filter(function(e){return e}).toProperty(),r.onValue(function(e){return s.write("default_location",e.country_code)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./locations":29,"./popup":36,storage:11}],21:[function(e,n,o){var t;t=function(){function e(){this.listeners={}}return e.prototype.off=function(e,n){var o;return this.listeners[e]=null!=(o=this.listeners[e])?o.filter(function(e){return e!==n}):void 0},e.prototype.on=function(e,n){return this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n)},e.prototype.trigger=function(e,n){var o,t,r,i,a;if(this.listeners[e]){for(i=this.listeners[e],a=[],o=0,t=i.length;t>o;o++)r=i[o],a.push(r(n));return a}},e}(),n.exports=t},{}],22:[function(e,n,o){(function(o){var t,r,i,a,s,u,l;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,l=e("storage"),u=e("./popup").popup,r=e("./default_location"),a=e("./logged_in"),s=e("page_api"),n.exports=i=t.fromPromise(l.read("enabled")).mapError(function(){return!0}).merge(t.fromEvent(s,"toggle")).merge(t.fromEvent(u,"request:toggleProxy")).merge(a.skip(1).changes().map(function(){return!0})).skipDuplicates().toProperty(),i.onValue(function(e){return e===!0?l.write("enabled_start",Date.now()):l.read("enabled_start",!1).then(function(e){return e?(l.write("enabled_for",(Date.now()-e)/1e3),l["delete"]("enabled_start")):void 0}),l.write("enabled",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default_location":20,"./logged_in":30,"./popup":36,page_api:10,storage:11}],23:[function(e,n,o){(function(o){var t,r,i,a,s,u,l,c,d;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,l=e("storage"),u=e("./popup").popup,r=e("auth"),d=e("./account").user,a={malwareBlocking:"m",trackingProtection:"t"},s=t.fromEvent(u,"request:toggleMalware"),c=t.fromEvent(u,"request:toggleTracking"),n.exports=i=t.fromPromise(l.read("features")).mapError(function(){return{}}).flatMap(function(e){return t.combineTemplate({malwareBlocking:s.startWith(e.malwareBlocking||!1),trackingProtection:c.startWith(e.trackingProtection||!1)}).combine(d,function(e,n){return(null!=n?n.is_premium:void 0)?e:{}})}),i.onValue(function(e){var n,o,t;n="";for(o in e)t=e[o],t&&(n+=a[o]);return r.setFeatureFlags(n),l.write("features",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":36,auth:6,storage:11}],24:[function(e,n,o){(function(n){var t,r,i,a,s,u,l,c,d,f,p,g,m,w;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("browser"),p=e("tab_info").tabInfo,m=e("./tab_state").tabState,s=e("./logged_in"),a=e("./enabled"),i=e("./current_location"),f=e("./rules").rulesEnabled,d=e("blocked").proxyBlocked,u=e("./language").messages,w=e("./account").user,c=e("./promo"),l=e("./news"),g=e("./tab_spawns"),o.iconImage=t.combineAsArray(s,a.and(d.not()),m,f).onValues(function(e,n,o,t){return t&&o.isRuleActive&&o.isDirect?r.setIconImage("disabled"):e?n||t&&o.isRuleActive?r.setIconImage("enabled"):r.setIconImage("disabled"):r.setIconImage("signedOut")}),o.iconTitle=t.combineAsArray(s,a.and(d.not()),p,m,i,f,u).onValues(function(e,n,o,t,i,a,s){return a&&t.isRuleActive?r.setIconTitle(s.icon_hover.connected.replace("{host}",o.host).replace("{country}",i.country_name)):a&&t.isRuleActive&&t.isDirect?r.setIconTitle(s.icon_hover.disabled_smart):e?n?t.isLocal?r.setIconTitle(s.icon_hover.local):r.setIconTitle(s.icon_hover.connected.replace("{host}",o.host).replace("{country}",i.country_name)):r.setIconTitle(s.icon_hover.disabled):r.setIconTitle(s.icon_hover.signed_out)}),o.iconBadge=t.combineAsArray(p,m,i,f,w,c,l,g).onValues(function(e,n,o,t,i,a,s,u){return t&&n.isRuleActive?r.setIconBadge(o.country_code.toLowerCase(),e.id):r.setIconBadge("",e.id),t&&n.isRuleActive&&n.isDirect&&r.setIconBadge("off",e.id),a&&a.badge&&r.setIconBadge(a.badge,e.id,a.color),s&&s.isNew&&s.showBadge||u&&u.isNew?r.setIconBadge("1",e.id,"#CC3333"):void 0})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./current_location":18,"./enabled":22,"./language":28,"./logged_in":30,"./news":31,"./promo":37,"./rules":39,"./tab_spawns":40,"./tab_state":41,blocked:7,browser:8,tab_info:12}],25:[function(e,n,o){(function(n){var t,r,i,a,s,u,l,c,d,f,p,g,m,w,v,h,y,b,_,x,E,L,P,k,A,B,T,I,R;e("./bacon.ext"),i=e("./config"),g=e("loglevel"),t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,e("./debug_overrides"),e("./install_source"),e("./logged_in"),e("./registration"),e("./page"),e("./notifications"),e("./tab_spawns"),e("./icon_state"),e("./connect"),e("./widget"),r=e("browser"),A=e("storage"),f=e("./language").language,B=e("tab_info").tabInfo,T=e("./tab_state").tabState,h=e("./popup").popup,w=e("./page").page,c=e("./enabled"),v=e("page_api"),x=e("./account"),R=x.user,l=x.device,p=e("./locations"),y=e("./promo"),u=e("./default_location"),a=e("./current_location"),m=e("./news"),d=e("./features"),E=e("./rules"),P=E.rules,k=E.rulesEnabled,I=e("./url"),L=e("blocked"),b=L.proxyBlocked,_=L.proxyBlockedBy,s=t.combineTemplate({user:R,device:l,promo:y,news:m,language:f,features:d,tabInfo:B,tabState:T,locations:p,currentLocation:a,defaultLocation:u,enabled:c,rules:P,rulesEnabled:k,proxyBlocked:b,proxyBlockedBy:_}),s.onValue(function(e){return window.popupData=e}),s.triggeredBy(t.fromEvent(h,"request:data")).onValue(function(e){return h.send("response:data",e)}),t.fromEventTarget(w,"request:data").flatMapLatest(function(){return t.combineAsArray(R.startWith(null),l.startWith(null))}).onValue(function(e){var n,o;return o=e[0],n=e[1],w.send("response:data",{user:o,device:n})}),t.fromEvent(v,"request:getData").flatMapLatest(function(e){return t.combineAsArray(e,R,l).take(1)}).onValues(function(e,n,o){return v.send("response:getData",e._sender,{timestamp:e.timestamp,user:n,device:o})}),t.fromEventTarget(h,"request:openPage").merge(t.fromEventTarget(w,"request:openPage")).map(function(e){return I.formatUrlParams(e)}).onValue(r.openPage),t.fromEventTarget(h,"request:unblockProxySettings").onValue(function(){return r.unblockProxySettings()}),o.onUnload=r.onUnload}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./bacon.ext":5,"./config":15,"./connect":16,"./current_location":18,"./debug_overrides":19,"./default_location":20,"./enabled":22,"./features":23,"./icon_state":24,"./install_source":27,"./language":28,"./locations":29,"./logged_in":30,"./news":31,"./notifications":32,"./page":34,"./popup":36,"./promo":37,"./registration":38,"./rules":39,"./tab_spawns":40,"./tab_state":41,"./url":43,"./widget":45,blocked:7,browser:8,loglevel:1,page_api:10,storage:11,tab_info:12}],26:[function(e,n,o){(function(o){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,s=e("storage"),u=e("./util"),r=e("./config"),a=e("xhr").request,n.exports=i=t.fromPromise(s.read("install_id")).mapError(function(){var e;return e=u.generateInstallId(),a({method:"GET",url:r.apiURL+"/v2/et/install/download",data:{install_id:e}}),e}).toProperty(),i.onValue(function(e){return s.write("install_id",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":15,"./util":44,storage:11,xhr:14}],27:[function(e,n,o){(function(o){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,s=e("storage"),r=e("browser"),u=e("./util"),a=e("loglevel"),n.exports=i=t.fromPromise(s.read("install_source")).flatMapError(function(e){return t.fromCallback(function(e){return r.getInstallSource(e)})}).toProperty(),i.onValue(function(e){return s.write("install_source",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":44,browser:8,loglevel:1,storage:11}],28:[function(e,n,o){(function(t){var r,i,a,s,u,l,c;r="undefined"!=typeof window?window.Bacon:"undefined"!=typeof t?t.Bacon:null,i=e("browser"),c=e("storage"),l=e("./popup").popup,u=e("./page").page,s="undefined"!=typeof window?window.locales:"undefined"!=typeof t?t.locales:null,o.language=a=r.fromPromise(c.read("language")).mapError(function(){return i.getLocale()}).merge(r.fromEvent(l,"request:changeLanguage")).merge(r.fromEvent(u,"request:changeLanguage")).skipDuplicates().toProperty(),n.exports.messages=a.map(function(e){return s.getLocalization(e).messages}),a.onValue(function(e){return c.write("language",e)}),r.fromEvent(u,"request:language").flatMapLatest(function(){return a}).onValue(function(e){return u.send("response:language",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./page":34,"./popup":36,browser:8,storage:11}],29:[function(e,n,o){(function(o){var t,r,i,a,s,u,l,c,d,f,p,g,m,w,v;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,i=e("./config"),w=e("storage"),d=e("./registration"),m=d.signUp,p=d.signIn,g=d.signOut,l=e("./page").page,c=e("./popup").popup,f=e("xhr").request,r=e("./api_request"),v=e("./update"),u=e("./features"),a=t.fromPromise(w.read("custom_locations")).mapError(function(){return[]}).concat(t.fromEvent(c,"request:addCustomLocation").map(function(e){return[e]})).filter(function(e){return e}).scan([],".concat"),a.onValue(function(e){return w.write("custom_locations",e)}),s=t.fromPromise(w.read("default_locations")).skipErrors().merge(m.merge(p).merge(v).map(function(e){var n;return n=e.locations})).filter(function(e){return null!=e?e.length:void 0}).map(function(e){return e.filter(function(e){return e.proxy_available})}).merge(g.map(function(){return null})).toProperty(),s.onValue(function(e){return null!=e?w.write("default_locations",e):w["delete"]("default_locations")}),n.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./config":15,"./features":23,"./page":34,"./popup":36,"./registration":38,"./update":42,storage:11,xhr:14}],30:[function(e,n,o){(function(o){var t,r,i,a,s,u,l;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,r=e("browser"),a=e("./registration"),l=a.signUp,s=a.signIn,u=a.signOut,n.exports=i=t.fromPromise(r.setup()).merge(l.map(function(){return!0})).merge(s.map(function(){return!0})).merge(u.map(function(){return!1})).skipDuplicates().toProperty(),i.onValue(function(e){return e?r.setIconAction("popup"):(r.setIconAction("page"),r.openPage(r.getExtensionURL("page.html"),!0))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./registration":38,browser:8}],31:[function(e,n,o){(function(o){var t,r,i,a,s,u,l=[].indexOf||function(e){for(var n=0,o=this.length;o>n;n++)if(n in this&&this[n]===e)return n;return-1};t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,u=e("storage"),a=e("./popup").popup,r=e("./crm"),s=t.fromPromise(u.read("previous_news")).mapError(function(){return[]}).flatMapLatest(function(e){return t.fromEvent(a,"request:popupOpen").flatMapLatest(i.take(1)).scan(e,function(e,n){var o;return!n||(o=n.id,l.call(e,o)>=0)||e.push(n.id),e})}).toProperty(),s.onValue(function(e){return u.write("previous_news",e)}),i=t.fromPromise(u.read("news-items")).mapError(function(){return null}).concat(r.map(function(e){return null!=e?e.news:void 0})).skipErrors().toProperty(),i.onValue(function(e){return u.write("news-items",e)}),n.exports=i.combine(s,function(e,n){var o;return!e||(o=e.id,l.call(n,o)>=0)?null!=e&&(e.isNew=!1):e.isNew=!0,e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./crm":17,"./popup":36,storage:11}],32:[function(e,n,o){(function(o){var t,r,i,a,s,u,l=[].indexOf||function(e){for(var n=0,o=this.length;o>n;n++)if(n in this&&this[n]===e)return n;return-1};t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,u=e("storage"),r=e("browser"),s=e("./popup").popup,i=e("./crm"),n.exports=a=i.map(function(e){return null!=e?e.notification:void 0}).flatMapLatest(function(e){return t.combineAsArray(e,t.fromPromise(u.read("notifications")).mapError([]))}).toProperty(),a.onValues(function(e,n){var o,t,i;return(null!=e?!e.id:!0)||(i=e.id,l.call(n,i)>=0)?void 0:(o={type:"basic",title:e.title,message:e.text},t={title:e.title,text:e.text,data:{url:e.url}},r.notify({chrome:{newsItem:o,data:{url:e.url}},firefox:t}),u.write("notifications",n.concat(e.id)))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./crm":17,"./popup":36,browser:8,storage:11}],33:[function(e,n,o){var t,r,i,a,s,u,l,c,d={}.hasOwnProperty;t=e("./config"),c=e("./util"),a=e("loglevel"),r={localDomains:t.localDomains,nodeOverrides:t.nodeOverrides,IPv4NotationRE:/^\d+\.\d+\.\d+\.\d+$/g,localIPsRE:/(^127\.)|(^192\.168\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)/},i={data:r,nodeLookup:function(e,n){return e[n]||!1},compareHosts:function(e,n){var o,t,r;for(t=0,r=e.length;r>t;t++)if(o=e[t],this.matchWildcardDomain(n,o))return o},compareURLs:function(e,n){var o,t,r;for(o=0,t=e.length;t>o;o++)if(r=e[o],r.test(n))return r},dnsDomainIs:function(e,n){return e.length>=n.length&&e.substring(e.length-n.length)===n},matchWildcardDomain:function(e,n){var o,t,r;return o=e===n,r=e.slice(-n.length)===n,t="."===e[e.lastIndexOf(n)-1],o||r&&t},matchNodeOverride:function(e,n){var o,t,r;return r=function(){var t,r,i,a;for(i=this.data.nodeOverrides,a=[],t=0,r=i.length;r>t;t++)o=i[t],o.target_cc===n&&this.compareHosts(o.hosts,e)&&a.push(o);return a}.call(this),(null!=r&&null!=(t=r[0])?t.nodes:void 0)||!1},matchRules:function(e,n,o){var r,i,a,u;if((null!=e?e.length:void 0)>0)for(null==this.data.rulesWithOverrides&&(e=s(e,t.ruleOverrides)),r=i=0,a=e.length;a>i;r=++i)if(u=e[r],this.matchWildcardDomain(n,u.domain)||null!=u.hosts&&this.compareHosts(u.hosts,n))return r},_getProxyState:function(e,n,o){var t,r,i,a,s;if(e=e.toLowerCase(),this.data.IPv4NotationRE.lastIndex=0,this.data.localIPsRE.lastIndex=0,!~n.indexOf(".")&&!~n.indexOf(":"))return"LOCAL";if(this.data.IPv4NotationRE.test(n)&&this.data.localIPsRE.test(n))return"LOCAL";for(s=this.data.localDomains,t=0,r=s.length;r>t;t++)if(i=s[t],this.matchWildcardDomain(n,i))return"LOCAL";return a=this.matchRules(o,n,e),null!=a?o[a].cc:"DEFAULT"}},l=function(e){var n,o,t;null==e&&(e=i),o=[];for(n in e)if(d.call(e,n))switch(t=e[n],typeof e[n]){case"function":o.push(n+": "+t.toString());break;case"object":o.push(n+": "+JSON.stringify(e[n]))}return"{ "+o.join(",")+" }"},s=function(e,n){var o,t,r,i,a,s;if(!((null!=e?e.length:void 0)>0))return[];if(!((null!=n?n.length:void 0)>0))return e;for(o=0,r=e.length;r>o;o++)for(s=e[o],t=0,i=n.length;i>t;t++)a=n[t],a.domains.indexOf(s.domain)>-1&&(s.hosts=c.concatUnique(s.hosts||[],a.hosts||[]));return e},u="e.data.IPv4NotationRE = "+r.IPv4NotationRE.toString()+";\ne.data.localIPsRE = "+r.localIPsRE.toString()+";",o.exportPAC=function(e,n,o,r){var i;return null==o&&(o=[]),null==r&&(r=[]),i="/*ZenMate*/\nfunction FindProxyForURL(url, host) {\n\n  var e = "+l()+";\n  e.data.localDomains = e.data.localDomains.concat("+JSON.stringify(r)+");\n  "+u+"\n\n  e.data.defaultLocation = '"+e+"';\n  e.data.nodeDict = "+JSON.stringify(n)+";\n  e.data.rulesWithOverrides = "+JSON.stringify(s(o,t.ruleOverrides))+";\n\n  var res = e._getProxyState(url, host, e.data.rulesWithOverrides);\n\n  if (res === 'LOCAL' || res === 'DIRECT' || res === 'OFF') {return 'DIRECT'};\n  if (res === 'DEFAULT') {cc = e.data.defaultLocation} else {cc = res};\n\n  var override = e.matchNodeOverride(host, cc);\n  if (override) {cc = override};\n\n  return e.nodeLookup(e.data.nodeDict, cc) || 'DIRECT';\n}"},o.getProxyStateByURL=function(e,n,o){return null==o&&(o=[]),n=n||c.parseURL(e).host||e,i._getProxyState(e,n,o)},o.getNodeDictFromLocations=function(e,n,o){var r,i,a,s,u;for(e=e.concat(t.alternativeNodes),s={},r=0,i=e.length;i>r;r++)a=e[r],u=a.nodes.slice(0,15).map(function(e){var n;return n=e.replace("node.zenmate.io","zenguard.org").replace("node.zenguard.co","zenguard.co"),o?n:"HTTPS "+n+":443"}),s[a.country_code]=u.join(";");return s},o.matchRules=function(e,n,o){return i.matchRules(e,n,o)}},{"./config":15,"./util":44,loglevel:1}],34:[function(e,n,o){(function(n){var t,r,i,a;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,r=e("message_handler"),i=e("browser"),o.page=a=new r("page"),t.fromEventTarget(a,"request:closePage").onValue(function(){return i.closePage(i.getExtensionURL("page.html"))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{browser:8,message_handler:9}],35:[function(e,n,o){(function(o){var t,r,i;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,i=e("page_api"),r=["zenmate.com","d1jr1idae5ms9n.cloudfront.net"],n.exports=t.interval(18e5,r).merge(t.fromEvent(i,"setPageExcludes").map(function(e){return r.concat(e)})).toProperty(r)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{page_api:10}],36:[function(e,n,o){var t,r;t=e("message_handler"),o.popup=r=new t("popup")},{message_handler:9}],37:[function(e,n,o){(function(o){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,s=e("storage"),u=e("./account").user,r=e("./popup").popup,i=t.fromPromise(s.read("premium_expires_at")).flatMapError(function(){return u.map(function(e){return"com.zenmate.premium_trial"===(null!=e?e.subscription.sku:void 0)?e.subscription.expires_at:null})}).merge(t.fromEvent(r,"request:hide-trialExpired").map(!1)).toProperty(),i.onValue(function(e){return null!=e?s.write("premium_expires_at",e):void 0}),a=i.combine(u,function(e,n){return e?(null!=n?n.is_premium:void 0)?!1:new Date(e)<Date.now():!1}),n.exports=a.map(function(e){return e?{view:"trialExpired",badge:"!",color:"#CC3333"}:null}).toProperty()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":36,storage:11}],38:[function(e,n,o){(function(n){var t,r,i,a,s,u,l,c,d,f,p,g,m,w,v,h,y,b;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,p=e("xhr").request,b=e("./util"),i=e("./config"),c=e("./page").page,f=e("./popup").popup,s=e("./install_source"),l=e("loglevel"),r=e("browser"),y=e("./update"),h=e("storage"),d=e("page_api"),a=function(e){return t.fromPromise(new Promise(function(n,o){return"onload"===e.type?o(e):p({method:"HEAD",url:"http://www.google.com/killer-robots.txt"}).then(function(e){return o(Error("errors.api_down"))})["catch"](function(){return p({method:"HEAD",url:"http://www.zenmate.com/"}).then(function(e){return o(Error("errors.api_down"))})["catch"](function(){return o(Error("errors.offline"))})})}))},o.signOut=w=t.fromEventTarget(f,"request:signOut").merge(y.errors().mapError(function(e){return 403===e.status}).filter(function(e){return e})),w.onValue(function(){return r.closePopup()}),o.signUp=v=t.fromEventTarget(c,"request:signUp").flatMapLatest(function(e){return t.combineAsArray(t.fromPromise(h.read("device",!1)),s,e)}).flatMapLatest(function(e){var n,o,r;return o=e[0],r=e[1],n=e[2],n.anonymous&&(null!=o?o.uuid:void 0)&&(null!=o?o.token:void 0)?(h.read("user",!1).then(function(e){return c.send("response:signUp",e)}),t.never()):(null!=o&&(n.auth_id=o.uuid,n.auth_secret=o.token),n.install_source=r,t.fromPromise(p({method:"POST",url:i.apiURL+"/v2/sign_up",responseType:"json",data:n})))}).flatMapError(a).flatMapError(function(e){return t.fromPromise(new Promise(function(n,o){return o("onload"!==e.type?e:404===+e.status?Error("errors.email.not_found"):422===+e.status?Error(e.payload.error_codes[e.payload.error_codes.length-1]):Error("errors.unkown"))}))}),v.onValue(function(e){var n;return n=e.user,c.send("response:signUp",n)}),v.onError(function(e){return c.send("error:signUp",e.message)}),o.signIn=m=t.fromEventTarget(c,"request:signIn").map(function(e){return{auth_method:"user",auth_id:e.email,auth_secret:e.password}}).merge(t.fromEvent(d,"updateWithCredentials")).flatMapLatest(function(e){return t.combineAsArray(s,e)}).flatMapLatest(function(e){var n,o;return o=e[0],n=e[1],n.install_source=o,t.fromPromise(p({method:"POST",url:i.apiURL+"/v2/sign_in",responseType:"json",data:n}))}).flatMapError(function(e){return a(e)}).flatMapError(function(e){return t.fromPromise(new Promise(function(n,o){return o("onload"!==e.type?e:403===+e.status?Error("errors.user.unknown_email_password"):422===+e.status?Error(e.payload.error_codes[e.payload.error_codes.length-1]):Error("errors.unknown"))}))}),m.onValue(function(e){var n;return n=e.user,c.send("response:signIn",n)}),m.onError(function(e){return c.send("error:signIn",e.message)}),u=t.fromEventTarget(c,"request:isRegistered").flatMapLatest(function(e){return t.fromPromise(p({url:i.apiURL+"/v2/email_registered",responseType:"json",data:e}))}).flatMapError(a),u.onValue(function(e){return c.send("response:isRegistered",e)}),u.onError(function(e){return c.send("error:isRegistered",e.message)}),g=t.fromEventTarget(c,"request:forgotPassword").flatMapLatest(function(e){return t.fromPromise(p({url:i.apiURL+"/v2/account/password_reset",method:"POST",responseType:"json",data:{email:e.email}}))}).flatMapError(function(e){return a(e)}).flatMapError(function(e){return t.fromPromise(new Promise(function(n,o){return o("onload"!==e.type?e:404===+e.status?Error("errors.user.email.not_found"):422===+e.status?Error(e.payload.error_codes[e.payload.error_codes.length-1]):Error("error.general_api"))}))}),g.onValue(function(){return c.send("response:forgotPassword")}),g.onError(function(e){return c.send("error:forgotPassword",e.message)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./config":15,"./install_source":27,"./page":34,"./popup":36,"./update":42,"./util":44,browser:8,loglevel:1,page_api:10,storage:11,xhr:14}],39:[function(e,n,o){(function(n){var t,r,i,a,s,u;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,s=e("storage"),r=e("./popup").popup,u=e("./account").user,o.rules=i=t.fromPromise(s.read("rules")).mapError(function(){return[]}).merge(t.fromEvent(r,"request:updateRules")).filter(function(e){return e}).toProperty(),i.onValue(function(e){return s.write("rules",e)}),o.rulesEnabled=a=t.fromPromise(s.read("rules_enabled")).mapError(function(){return!1}).merge(t.fromEvent(r,"request:toggleRules")).combine(u,function(e,n){return(null!=n?n.is_premium:void 0)&&e}).skipDuplicates().toProperty(),a.onValue(function(e){return s.write("rules_enabled",e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./popup":36,storage:11}],40:[function(e,n,o){(function(o){var t,r,i,a,s,u,l,c,d,f=[].indexOf||function(e){for(var n=0,o=this.length;o>n;n++)if(n in this&&this[n]===e)return n;return-1};t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,c=e("storage"),s=e("./popup").popup,a=e("./crm"),i=e("browser"),u=t.fromEvent(s,"request:popupOpen"),r=t.fromPromise(c.read("tab_spawn")).mapError(function(){return null}).concat(a.map(function(e){return null!=e?e.tabSpawn:void 0})).toProperty(),r.onValue(function(e){return c.write("tab_spawn",e)}),l=t.fromPromise(c.read("previous_tab_spawns")).mapError(function(){return[]}).flatMapLatest(function(e){return u.flatMapLatest(r.take(1)).scan(e,function(e,n){var o;return!n||(o=n.id,f.call(e,o)>=0)||e.push(n.id),e})}).toProperty(),l.onValue(function(e){return c.write("previous_tab_spawns",e)}),n.exports=d=r.combine(l,function(e,n){var o;return!e||(o=e.id,f.call(n,o)>=0)?null!=e&&(e.isNew=!1):e.isNew=!0,e}),d.filter(".isNew").flatMapLatest(function(e){return u.take(1).map(e)}).onValue(function(e){return i.openPage(null!=e?e.url:void 0)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./crm":17,"./popup":36,browser:8,storage:11}],41:[function(e,n,o){(function(n){var t,r,i,a,s,u,l;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,l=e("./util"),s=e("./rules").rules,u=e("tab_info").tabInfo,a=e("./pacengine"),i=e("loglevel"),r=function(e,n){var o,t,r;return r=l.parseURL(e.url),o=a.getProxyStateByURL(e.url,r.host,n),t={isDefault:"DEFAULT"===o,isLocal:"LOCAL"===o,isDirect:"OFF"===o},t.isRuleActive=!(t.isDefault||t.isLocal),t.isRuleActive&&!t.isDirect&&(t.customCountry=o),t},o.tabState=t.combineTemplate({tabInfo:u,rules:s}).map(function(e){var n,o;return o=e.tabInfo,n=e.rules,null!=o?r(o,n):void 0})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./pacengine":33,"./rules":39,"./util":44,loglevel:1,tab_info:12}],42:[function(e,n,o){(function(o){var t,r,i,a,s;t="undefined"!=typeof window?window.Bacon:"undefined"!=typeof o?o.Bacon:null,r=e("./api_request"),i=e("./install_id"),a=e("page_api"),s=e("storage"),n.exports=t.once().merge(t.interval(12e5)).merge(t.fromEvent(a,"update")).flatMap(function(){return t.combineAsArray(i.take(1),t.fromPromise(s.read("enabled_for",!1)))}).flatMapLatest(function(e){var n,o;return o=e[0],n=e[1],r("devices/"+o,"GET",{enabled_for:n})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api_request":4,"./install_id":26,page_api:10,storage:11}],43:[function(e,n,o){var t;t=e("browser"),o.formatUrlParams=function(e){var n,o,r;return e.ga&&(e.params.utm_campaign="extension",e.params.utm_source=t.getName(),e.params.utm_medium=e.ga.utm_medium||"unknown"),o=function(){var o,t;o=e.params,t=[];for(n in o)r=o[n],t.push(n+"="+r);return t}(),(null!=o?o.length:void 0)&&(e.url+="?"+o.join("&")),e.url.replace("{browser}",t.getName())}},{browser:8}],44:[function(e,n,o){var t;t=e("./config"),o.generateInstallId=function(){var e;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},o.parseURL=function(e){var n,o,t;return t=/^([^:]+):\/\/([^\/:]*)(?::([\d]+))?(?:(\/[^#]*)(?:#(.*))?)?$/i,n=e.match(t),n?{scheme:n[1].toLowerCase(),host:n[2].toLowerCase(),port:n[3],path:n[4]||"/",fragment:n[5],local:"http"!==(o=n[1].toLowerCase())&&"https"!==o}:{}},o.getUTMSourcesFromURL=function(e){var n,t,r,i;for(t=o.parseURL(e).path,r=/[?&]([^=#]+)=([^&#]*)/g,i=[];n=r.exec(t);)0===n[1].indexOf("utm_")&&i.push(n[1]+"="+n[2]);return i.join(";")},o.concatUnique=function(e,n){return e.concat(n).filter(function(e,n,o){return o.indexOf(e)===n})}},{"./config":15}],45:[function(e,n,o){(function(n){var o,t,r,i,a,s,u,l,c,d,f,p,g;o="undefined"!=typeof window?window.Bacon:"undefined"!=typeof n?n.Bacon:null,t=e("browser"),u=e("./account"),p=u.user,r=u.device,g=e("widget_messages"),s=e("./language").messages,i=e("./enabled"),d=e("storage"),l=e("xhr").request,f=e("./url"),c=o.fromPromise(d.read("widget_last_shown")).mapError(function(){return 0}).flatMapLatest(function(e){return o.later(Math.max(6048e5+e-Date.now(),10),!0)}).merge(o.interval(36288e6,!0)).merge(o.fromEvent(g,"getPremium").flatMapLatest(function(){return p.take(1)}).doAction(function(e){return f="https://secure.zenmate.com/#/?autologin=true&utm_source=extension&utm_medium=chrome&utm_campaign=free_users_widget",t.openPage(f)}).map(!1)).merge(o.fromEvent(g,"dismiss").map(!1)).toProperty().flatMapLatest(function(e){return o.combineAsArray(e,p,i)}),c.onValues(function(e,n,o){return g.toggle(e&&null!=n&&o&&!n.is_premium),e?d.write("widget_last_shown",Date.now()):void 0}),a=o.combineAsArray(p,s).map(function(e){var n,o;return o=e[0],n=e[1],(null!=o?o.is_verified:void 0)?n.widget.verified:n.widget.unverified}).toProperty(),o.once(!0).merge(o.interval(5184e6,!0)).merge(o.fromEvent(g,"hideMessage").map(!1)).combine(a,function(e,n){return[e,n]}).onValues(function(e,n){return g.toggleMessage(e,n)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./account":3,"./enabled":22,"./language":28,"./url":43,browser:8,storage:11,widget_messages:13,xhr:14}]},{},[25]);