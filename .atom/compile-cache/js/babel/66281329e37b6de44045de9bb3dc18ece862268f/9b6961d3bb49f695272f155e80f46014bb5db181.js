var _atom = require('atom');

'use babel';

module.exports = {
  config: {
    execPath: {
      title: "GCC Executable Path",
      description: "Note for Windows/Mac OSX users: please ensure that GCC is in your ```$PATH``` otherwise the linter might not work. If your path contains spaces, it needs to be enclosed in double quotes.",
      type: "string",
      'default': "/usr/bin/g++"
    },
    gccIncludePaths: {
      title: "GCC Include Paths",
      description: "Enter your include paths as a comma-separated list. Paths starting with ```.``` or ```..``` are expanded relative to the project root/file path. If any of your paths contain spaces, they need to be enclosed in double quotes.",
      type: "string",
      'default': " "
    },
    gccSuppressWarnings: {
      title: "Suppress GCC Warnings",
      type: "boolean",
      'default': false
    },
    gccDefaultCFlags: {
      title: "C Flags",
      description: "Supports the use of espcaped characters",
      type: "string",
      'default': "-c -Wall"
    },
    gccDefaultCppFlags: {
      title: "C++ Flags",
      description: "Supports the use of espcaped characters",
      type: "string",
      'default': "-c -Wall -std=c++11"
    },
    gccLintOnTheFly: {
      title: "Lint on-the-fly",
      description: "Please ensure any auto-saving packages are disabled before using this feature",
      type: "boolean",
      'default': false
    },
    gccErrorLimit: {
      title: "GCC Error Limit",
      type: "integer",
      'default': 0
    }
  },

  messages: {},
  linter_gcc: undefined,

  temp_file: require("tempfile")(".cpp"),

  lint: function lint(editor, linted_file, real_file) {
    var helpers = require("atom-linter");
    var regex = "(.+):(?<line>\\d+):(?<col>\\d+):\\s*\\w*\\s*(?<type>(error|warning|note)):\\s*(?<message>.*)";
    command = require("./utility").buildCommand(editor, linted_file);
    return helpers.exec(command.binary, command.args, { stream: "stderr" }).then(function (output) {
      msgs = helpers.parse(output, regex);
      msgs.forEach(function (entry) {
        entry.filePath = real_file;
      });
      if (msgs.length == 0 && output.indexOf("error") != -1) {
        msgs = [{
          type: 'error',
          text: output,
          filePath: real_file
        }];
      }
      module.exports.messages[real_file] = msgs;
      if (typeof module.exports.linter_gcc != "undefined") {
        module.exports.linter_gcc.setMessages(require("./utility").flattenHash(module.exports.messages));
      }
      return msgs;
    });
  },

  activate: function activate() {
    this.subscriptions = new _atom.CompositeDisposable();
  },
  deactivate: function deactivate() {
    this.subscriptions.dispose();
  },
  consumeLinter: function consumeLinter(indieRegistry) {
    module.exports.linter_gcc = indieRegistry.register({
      name: 'GCC'
    });

    subs = this.subscriptions;
    utility = require("./utility");
    lintOnTheFly = function () {
      editor = utility.getValidEditor(atom.workspace.getActiveTextEditor());
      if (!editor) return;
      if (atom.config.get("linter-gcc.gccLintOnTheFly") == false) return;
      require('fs-extra').outputFileSync(module.exports.temp_file, editor.getText());
      module.exports.lint(editor, module.exports.temp_file, editor.getPath());
    };

    lintOnSave = function () {
      editor = utility.getValidEditor(atom.workspace.getActiveTextEditor());
      if (!editor) return;
      if (atom.config.get("linter-gcc.gccLintOnTheFly") == true) return;
      real_file = editor.getPath();
      module.exports.lint(editor, real_file, real_file);
    };

    cleanupMessages = function () {
      editor_hash = {};
      console.log("Editor paths");
      atom.workspace.getTextEditors().forEach(function (entry) {
        try {
          path = entry.getPath();
        } catch (err) {}
        console.log(path);
        editor_hash[entry.getPath()] = 1;
      });
      console.log("Messages paths");
      for (var file in module.exports.messages) {
        console.log(file);
        if (!editor_hash.hasOwnProperty(file)) {
          delete module.exports.messages[file];
        }
      }
      module.exports.linter_gcc.setMessages(require("./utility").flattenHash(module.exports.messages));
    };

    subs.add(module.exports.linter_gcc);

    atom.workspace.observeTextEditors(function (editor) {
      subs.add(editor.onDidSave(lintOnSave));
      subs.add(editor.onDidStopChanging(lintOnTheFly));
      subs.add(editor.onDidDestroy(cleanupMessages));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3F1YWwvLmF0b20vcGFja2FnZXMvbGludGVyLWdjYy9saWIvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoib0JBS0ssTUFBTTs7QUFMWCxXQUFXLENBQUE7O0FBT1gsTUFBTSxDQUFDLE9BQU8sR0FBRztBQUNmLFFBQU0sRUFBRTtBQUNOLFlBQVEsRUFBRTtBQUNSLFdBQUssRUFBRSxxQkFBcUI7QUFDNUIsaUJBQVcsRUFBRSw0TEFBNEw7QUFDek0sVUFBSSxFQUFFLFFBQVE7QUFDZCxpQkFBUyxjQUFjO0tBQ3hCO0FBQ0QsbUJBQWUsRUFBRTtBQUNmLFdBQUssRUFBRSxtQkFBbUI7QUFDMUIsaUJBQVcsRUFBRSxrT0FBa087QUFDL08sVUFBSSxFQUFFLFFBQVE7QUFDZCxpQkFBUyxHQUFHO0tBQ2I7QUFDRCx1QkFBbUIsRUFBRTtBQUNuQixXQUFLLEVBQUUsdUJBQXVCO0FBQzlCLFVBQUksRUFBRSxTQUFTO0FBQ2YsaUJBQVMsS0FBSztLQUNmO0FBQ0Qsb0JBQWdCLEVBQUU7QUFDaEIsV0FBSyxFQUFFLFNBQVM7QUFDaEIsaUJBQVcsRUFBRSx5Q0FBeUM7QUFDdEQsVUFBSSxFQUFFLFFBQVE7QUFDZCxpQkFBUyxVQUFVO0tBQ3BCO0FBQ0Qsc0JBQWtCLEVBQUU7QUFDbEIsV0FBSyxFQUFFLFdBQVc7QUFDbEIsaUJBQVcsRUFBRSx5Q0FBeUM7QUFDdEQsVUFBSSxFQUFFLFFBQVE7QUFDZCxpQkFBUyxxQkFBcUI7S0FDL0I7QUFDRCxtQkFBZSxFQUFFO0FBQ2YsV0FBSyxFQUFFLGlCQUFpQjtBQUN4QixpQkFBVyxFQUFFLCtFQUErRTtBQUM1RixVQUFJLEVBQUUsU0FBUztBQUNmLGlCQUFTLEtBQUs7S0FDZjtBQUNELGlCQUFhLEVBQUU7QUFDYixXQUFLLEVBQUUsaUJBQWlCO0FBQ3hCLFVBQUksRUFBRSxTQUFTO0FBQ2YsaUJBQVMsQ0FBQztLQUNYO0dBQ0Y7O0FBRUQsVUFBUSxFQUFFLEVBQUU7QUFDWixZQUFVLEVBQUUsU0FBUzs7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QUNyQztPQUNGO0FBQ0QsWUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBRSxDQUFDO0tBQ3BHLENBQUM7O0FBRUYsUUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFBOztBQUVuQyxRQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixDQUFDLFVBQVMsTUFBTSxFQUFFO0FBQ2pELFVBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO0FBQ3RDLFVBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUE7QUFDaEQsVUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUE7S0FDL0MsQ0FBQyxDQUFBO0dBQ0g7Q0FDRixDQUFBIiwiZmlsZSI6Ii9ob21lL3F1YWwvLmF0b20vcGFja2FnZXMvbGludGVyLWdjYy9saWIvbWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2UgYmFiZWwnXG5cbmltcG9ydCB7XG4gIENvbXBvc2l0ZURpc3Bvc2FibGVcbn1cbmZyb20gJ2F0b20nXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjb25maWc6IHtcbiAgICBleGVjUGF0aDoge1xuICAgICAgdGl0bGU6IFwiR0NDIEV4ZWN1dGFibGUgUGF0aFwiLFxuICAgICAgZGVzY3JpcHRpb246IFwiTm90ZSBmb3IgV2luZG93cy9NYWMgT1NYIHVzZXJzOiBwbGVhc2UgZW5zdXJlIHRoYXQgR0NDIGlzIGluIHlvdXIgYGBgJFBBVEhgYGAgb3RoZXJ3aXNlIHRoZSBsaW50ZXIgbWlnaHQgbm90IHdvcmsuIElmIHlvdXIgcGF0aCBjb250YWlucyBzcGFjZXMsIGl0IG5lZWRzIHRvIGJlIGVuY2xvc2VkIGluIGRvdWJsZSBxdW90ZXMuXCIsXG4gICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgZGVmYXVsdDogXCIvdXNyL2Jpbi9nKytcIlxuICAgIH0sXG4gICAgZ2NjSW5jbHVkZVBhdGhzOiB7XG4gICAgICB0aXRsZTogXCJHQ0MgSW5jbHVkZSBQYXRoc1wiLFxuICAgICAgZGVzY3JpcHRpb246IFwiRW50ZXIgeW91ciBpbmNsdWRlIHBhdGhzIGFzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QuIFBhdGhzIHN0YXJ0aW5nIHdpdGggYGBgLmBgYCBvciBgYGAuLmBgYCBhcmUgZXhwYW5kZWQgcmVsYXRpdmUgdG8gdGhlIHByb2plY3Qgcm9vdC9maWxlIHBhdGguIElmIGFueSBvZiB5b3VyIHBhdGhzIGNvbnRhaW4gc3BhY2VzLCB0aGV5IG5lZWQgdG8gYmUgZW5jbG9zZWQgaW4gZG91YmxlIHF1b3Rlcy5cIixcbiAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICBkZWZhdWx0OiBcIiBcIlxuICAgIH0sXG4gICAgZ2NjU3VwcHJlc3NXYXJuaW5nczoge1xuICAgICAgdGl0bGU6IFwiU3VwcHJlc3MgR0NDIFdhcm5pbmdzXCIsXG4gICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBnY2NEZWZhdWx0Q0ZsYWdzOiB7XG4gICAgICB0aXRsZTogXCJDIEZsYWdzXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJTdXBwb3J0cyB0aGUgdXNlIG9mIGVzcGNhcGVkIGNoYXJhY3RlcnNcIixcbiAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICBkZWZhdWx0OiBcIi1jIC1XYWxsXCJcbiAgICB9LFxuICAgIGdjY0RlZmF1bHRDcHBGbGFnczoge1xuICAgICAgdGl0bGU6IFwiQysrIEZsYWdzXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJTdXBwb3J0cyB0aGUgdXNlIG9mIGVzcGNhcGVkIGNoYXJhY3RlcnNcIixcbiAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICBkZWZhdWx0OiBcIi1jIC1XYWxsIC1zdGQ9YysrMTFcIlxuICAgIH0sXG4gICAgZ2NjTGludE9uVGhlRmx5OiB7XG4gICAgICB0aXRsZTogXCJMaW50IG9uLXRoZS1mbHlcIixcbiAgICAgIGRlc2NyaXB0aW9uOiBcIlBsZWFzZSBlbnN1cmUgYW55IGF1dG8tc2F2aW5nIHBhY2thZ2VzIGFyZSBkaXNhYmxlZCBiZWZvcmUgdXNpbmcgdGhpcyBmZWF0dXJlXCIsXG4gICAgICB0eXBlOiBcImJvb2xlYW5cIixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBnY2NFcnJvckxpbWl0OiB7XG4gICAgICB0aXRsZTogXCJHQ0MgRXJyb3IgTGltaXRcIixcbiAgICAgIHR5cGU6IFwiaW50ZWdlclwiLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH1cbiAgfSxcblxuICBtZXNzYWdlczoge30sXG4gIGxpbnRlcl9nY2M6IHVuZGVmaW5lZCxcblxuICB0ZW1wX2ZpbGUgOiByZXF1aXJlKFwidGVtcGZpbGVcIikoXCIuY3BwXCIpLFxuXG4gIGxpbnQ6IGZ1bmN0aW9uKGVkaXRvciwgbGludGVkX2ZpbGUsIHJlYWxfZmlsZSl7XG4gICAgY29uc3QgaGVscGVycz1yZXF1aXJlKFwiYXRvbS1saW50ZXJcIik7XG4gICAgY29uc3QgcmVnZXggPSBcIiguKyk6KD88bGluZT5cXFxcZCspOig/PGNvbD5cXFxcZCspOlxcXFxzKlxcXFx3KlxcXFxzKig/PHR5cGU+KGVycm9yfHdhcm5pbmd8bm90ZSkpOlxcXFxzKig/PG1lc3NhZ2U+LiopXCJcbiAgICBjb21tYW5kID0gcmVxdWlyZShcIi4vdXRpbGl0eVwiKS5idWlsZENvbW1hbmQoZWRpdG9yLCBsaW50ZWRfZmlsZSk7XG4gICAgcmV0dXJuIGhlbHBlcnMuZXhlYyhjb21tYW5kLmJpbmFyeSwgY29tbWFuZC5hcmdzLCB7c3RyZWFtOiBcInN0ZGVyclwifSkudGhlbihvdXRwdXQgPT4ge1xuICAgICAgbXNncyA9IGhlbHBlcnMucGFyc2Uob3V0cHV0LCByZWdleClcbiAgICAgIG1zZ3MuZm9yRWFjaChmdW5jdGlvbihlbnRyeSl7XG4gICAgICAgIGVudHJ5LmZpbGVQYXRoID0gcmVhbF9maWxlO1xuICAgICAgfSlcbiAgICAgIGlmIChtc2dzLmxlbmd0aCA9PSAwICYmIG91dHB1dC5pbmRleE9mKFwiZXJyb3JcIikgIT0gLTEpe1xuICAgICAgICBtc2dzID0gW3tcbiAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgIHRleHQ6IG91dHB1dCxcbiAgICAgICAgICBmaWxlUGF0aDogcmVhbF9maWxlXG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgICAgbW9kdWxlLmV4cG9ydHMubWVzc2FnZXNbcmVhbF9maWxlXSA9IG1zZ3M7XG4gICAgICBpZiAodHlwZW9mIG1vZHVsZS5leHBvcnRzLmxpbnRlcl9nY2MgIT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzLmxpbnRlcl9nY2Muc2V0TWVzc2FnZXMocmVxdWlyZShcIi4vdXRpbGl0eVwiKS5mbGF0dGVuSGFzaChtb2R1bGUuZXhwb3J0cy5tZXNzYWdlcykpXG4gICAgICB9XG4gICAgICByZXR1cm4gbXNncztcbiAgICB9KVxuICB9LFxuXG4gIGFjdGl2YXRlOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXG4gIH0sXG4gIGRlYWN0aXZhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5kaXNwb3NlKClcbiAgfSxcbiAgY29uc3VtZUxpbnRlcjogZnVuY3Rpb24oaW5kaWVSZWdpc3RyeSkge1xuICAgIG1vZHVsZS5leHBvcnRzLmxpbnRlcl9nY2MgPSBpbmRpZVJlZ2lzdHJ5LnJlZ2lzdGVyKHtcbiAgICAgIG5hbWU6ICdHQ0MnXG4gICAgfSlcblxuICAgIHN1YnMgPSB0aGlzLnN1YnNjcmlwdGlvbnM7XG4gICAgdXRpbGl0eSA9IHJlcXVpcmUoXCIuL3V0aWxpdHlcIilcbiAgICBsaW50T25UaGVGbHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIGVkaXRvciA9IHV0aWxpdHkuZ2V0VmFsaWRFZGl0b3IoYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpKTtcbiAgICAgIGlmICghZWRpdG9yKSByZXR1cm47XG4gICAgICBpZiAoYXRvbS5jb25maWcuZ2V0KFwibGludGVyLWdjYy5nY2NMaW50T25UaGVGbHlcIikgPT0gZmFsc2UpIHJldHVybjtcbiAgICAgIHJlcXVpcmUoJ2ZzLWV4dHJhJykub3V0cHV0RmlsZVN5bmMobW9kdWxlLmV4cG9ydHMudGVtcF9maWxlLCBlZGl0b3IuZ2V0VGV4dCgpKTtcbiAgICAgIG1vZHVsZS5leHBvcnRzLmxpbnQoZWRpdG9yLCBtb2R1bGUuZXhwb3J0cy50ZW1wX2ZpbGUsIGVkaXRvci5nZXRQYXRoKCkpO1xuICAgIH07XG5cbiAgICBsaW50T25TYXZlID0gZnVuY3Rpb24oKXtcbiAgICAgIGVkaXRvciA9IHV0aWxpdHkuZ2V0VmFsaWRFZGl0b3IoYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlVGV4dEVkaXRvcigpKTtcbiAgICAgIGlmICghZWRpdG9yKSByZXR1cm47XG4gICAgICBpZiAoYXRvbS5jb25maWcuZ2V0KFwibGludGVyLWdjYy5nY2NMaW50T25UaGVGbHlcIikgPT0gdHJ1ZSkgcmV0dXJuO1xuICAgICAgcmVhbF9maWxlID0gZWRpdG9yLmdldFBhdGgoKTtcbiAgICAgIG1vZHVsZS5leHBvcnRzLmxpbnQoZWRpdG9yLCByZWFsX2ZpbGUsIHJlYWxfZmlsZSk7XG4gICAgfTtcblxuICAgIGNsZWFudXBNZXNzYWdlcyA9IGZ1bmN0aW9uKCl7XG4gICAgICBlZGl0b3JfaGFzaCA9IHt9O1xuICAgICAgY29uc29sZS5sb2coXCJFZGl0b3IgcGF0aHNcIik7XG4gICAgICBhdG9tLndvcmtzcGFjZS5nZXRUZXh0RWRpdG9ycygpLmZvckVhY2goIGZ1bmN0aW9uKGVudHJ5KXtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgIHBhdGggPSBlbnRyeS5nZXRQYXRoKClcbiAgICAgICAgfSBjYXRjaChlcnIpe1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKHBhdGgpXG4gICAgICAgIGVkaXRvcl9oYXNoW2VudHJ5LmdldFBhdGgoKV0gPSAxO1xuICAgICAgfSk7XG4gICAgICBjb25zb2xlLmxvZyhcIk1lc3NhZ2VzIHBhdGhzXCIpO1xuICAgICAgZm9yICh2YXIgZmlsZSBpbiBtb2R1bGUuZXhwb3J0cy5tZXNzYWdlcyl7XG4gICAgICAgIGNvbnNvbGUubG9nKGZpbGUpXG4gICAgICAgIGlmICghZWRpdG9yX2hhc2guaGFzT3duUHJvcGVydHkoZmlsZSkpe1xuICAgICAgICAgIGRlbGV0ZSBtb2R1bGUuZXhwb3J0cy5tZXNzYWdlc1tmaWxlXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBtb2R1bGUuZXhwb3J0cy5saW50ZXJfZ2NjLnNldE1lc3NhZ2VzKCByZXF1aXJlKFwiLi91dGlsaXR5XCIpLmZsYXR0ZW5IYXNoKG1vZHVsZS5leHBvcnRzLm1lc3NhZ2VzKSApO1xuICAgIH07XG5cbiAgICBzdWJzLmFkZChtb2R1bGUuZXhwb3J0cy5saW50ZXJfZ2NjKVxuXG4gICAgYXRvbS53b3Jrc3BhY2Uub2JzZXJ2ZVRleHRFZGl0b3JzKGZ1bmN0aW9uKGVkaXRvcikge1xuICAgICAgc3Vicy5hZGQoZWRpdG9yLm9uRGlkU2F2ZShsaW50T25TYXZlKSlcbiAgICAgIHN1YnMuYWRkKGVkaXRvci5vbkRpZFN0b3BDaGFuZ2luZyhsaW50T25UaGVGbHkpKVxuICAgICAgc3Vicy5hZGQoZWRpdG9yLm9uRGlkRGVzdHJveShjbGVhbnVwTWVzc2FnZXMpKVxuICAgIH0pXG4gIH1cbn1cbiJdfQ==
//# sourceURL=/home/qual/.atom/packages/linter-gcc/lib/main.js
